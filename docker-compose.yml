services:
  nexus:
    image: sonatype/nexus3:latest
    container_name: registry
    expose:
      - 8081
      - 8082
      - 8083
    ports:
      - "8081:8081"
      - "8082:8082"
      - "8083:8083"
    volumes:
      - ./volume-nexus:/nexus-data
    networks:
      - infra-vps
  caddy:
    image: caddy:latest
    container_name: caddy
    expose:
      - 80
      - 443
    ports:
      - 80:80
      - 443:443
    volumes:
      - ./volume-caddy/Caddyfile:/etc/caddy/Caddyfile
      - ./volume-caddy/site:/srv
      - ./volume-caddy/caddy_data:/data
      - ./volume-caddy/caddy_config:/config
    networks:
      - infra-vps
    restart: always
  portfolio-2024:
    build:
      context: ./../atelier-heloir/.
      dockerfile: Dockerfile.portfolio-2024
    container_name: portfolio-2024
    networks:
      - infra-vps

networks:
  infra-vps:
